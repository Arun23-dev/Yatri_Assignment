syntax = "proto3";

package wallet;

service WalletService {
  rpc CreateWallet(CreateWalletRequest) returns (CreateWalletResponse);
  rpc GetWallet(GetWalletRequest) returns (GetWalletResponse);
  rpc DeductBalance(DeductBalanceRequest) returns (DeductBalanceResponse);
  rpc GetTransactions(GetTransactionsRequest) returns (GetTransactionsResponse);
  rpc CreditBalance(CreditBalanceRequest) returns (CreditBalanceResponse);
  rpc GetWalletBalance(GetWalletBalanceRequest) returns (GetWalletBalanceResponse);
  rpc GetWalletSummary(GetWalletSummaryRequest) returns (GetWalletSummaryResponse);
  rpc DeleteCustomer(DeleteCustomerRequest) returns (DeleteCustomerResponse);
}

service CustomerService {
  rpc AddFunds(AddFundsRequest) returns (AddFundsResponse);
  rpc GetWalletBalance(GetWalletBalanceRequest) returns (GetWalletBalanceResponse);
  rpc GetTransactions(GetTransactionsRequest) returns (GetTransactionsResponse);
  rpc GetWalletSummary(GetWalletSummaryRequest) returns (GetWalletSummaryResponse);
  rpc GetWallet(GetWalletRequest) returns (GetWalletResponse);
  rpc CreateWallet(CreateWalletRequest) returns (CreateWalletResponse);
  rpc DeductBalance(DeductBalanceRequest) returns (DeductBalanceResponse);
}

message CreateWalletRequest {
  string customerId = 1;
  double initialBalance = 2;
}

message CreateWalletResponse {
  bool success = 1;
  string walletId = 2;
  double balance = 3;
  string message = 4;
}

message GetWalletRequest {
  string customerId = 1;
}

message GetWalletResponse {
  bool success = 1;
  string walletId = 2;
  double balance = 3;
  string customerId = 4;
  string message = 5;
}

message DeductBalanceRequest {
  string customerId = 1;
  double amount = 2;
  string reference = 3;
  string chargingSessionId = 4;
}

message DeductBalanceResponse {
  bool success = 1;
  double newBalance = 2;
  string transactionId = 3;
  string message = 4;
}

message GetTransactionsRequest {
  string customerId = 1;
  int32 page = 2;
  int32 limit = 3;
  string type = 4;
}

message GetTransactionsResponse {
  bool success = 1;
  repeated Transaction transactions = 2;
  int32 total = 3;
  int32 page = 4;
  int32 limit = 5;
  string message = 6;
}

message Transaction {
  string id = 1;
  string customerId = 2;
  double amount = 3;
  string type = 4;
  string description = 5;
  string reference = 6;
  string chargingSessionId = 7;
  string timestamp = 8;
}

message CreditBalanceRequest {
  string customerId = 1;
  double amount = 2;
  string paymentMethod = 3;
  string reference = 4;
  string description = 5;
}

message CreditBalanceResponse {
  bool success = 1;
  double newBalance = 2;
  string transactionId = 3;
  string message = 4;
}

message GetWalletBalanceRequest {
  string customerId = 1;
}

message GetWalletBalanceResponse {
  bool success = 1;
  double balance = 2;
  string message = 3;
}

message GetWalletSummaryRequest {
  string customerId = 1;
}

message GetWalletSummaryResponse {
  bool success = 1;
  WalletSummary summary = 2;
  string message = 3;
}

message WalletSummary {
  string walletId = 1;
  string customerId = 2;
  double balance = 3;
  int32 totalTransactions = 4;
  double totalCredits = 5;
  double totalDebits = 6;
  string lastTransactionDate = 7;
}

message DeleteCustomerRequest {
  string customerId = 1;
}

message DeleteCustomerResponse {
  bool success = 1;
  string message = 2;
}

message AddFundsRequest {
  string customerId = 1;
  double amount = 2;
  string paymentMethod = 3;
  string reference = 4;
  string description = 5;
}

message AddFundsResponse {
  bool success = 1;
  double newBalance = 2;
  string transactionId = 3;
  string message = 4;
  string paymentMethod = 5;
  string reference = 6;
}
